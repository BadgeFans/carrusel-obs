<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Banner Bilingüe Full Width</title>
<style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
        width:1920px; height:350px; background:transparent; overflow:hidden;
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        display:flex; justify-content:center; align-items:center;
    }

    .glass-overlay {
        width:1920px; height:350px;
        background: rgba(0,0,0,0.35);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        position:relative; display:flex; justify-content:center; align-items:center;
        border-top: 1px solid rgba(255,255,255,0.22);
        border-bottom: 1px solid rgba(255,255,255,0.18);
        box-shadow:
            inset 0 1px 12px rgba(255,255,255,0.06),
            0 8px 30px rgba(0,0,0,0.35);
    }

    .glass-overlay::before,
    .glass-overlay::after {
        content:''; position:absolute; left:0; right:0; height:24px; pointer-events:none;
    }
    .glass-overlay::before {
        top:0;
        background: linear-gradient(to bottom,
            rgba(255,255,255,0.10) 0%,
            rgba(255,255,255,0.04) 40%,
            rgba(255,255,255,0.00) 100%);
    }
    .glass-overlay::after {
        bottom:0;
        background: linear-gradient(to top,
            rgba(255,255,255,0.08) 0%,
            rgba(255,255,255,0.03) 40%,
            rgba(255,255,255,0.00) 100%);
    }

    .tint { position:absolute; inset:0; pointer-events:none; opacity:0.15; display:none; }
    .sheen {
        position:absolute; inset:0; pointer-events:none;
        background: linear-gradient(130deg,
            rgba(255,255,255,0.00) 0%,
            rgba(255,255,255,0.06) 35%,
            rgba(255,255,255,0.00) 70%);
        mix-blend-mode: screen;
    }

    .content-wrapper {
        width:100%; max-width:1800px; height:100%;
        display:flex; align-items:center; justify-content:space-between;
        padding:40px 60px; gap:60px; position:relative;
    }

    .text-col {
        flex:1; display:flex; flex-direction:column; gap:20px; z-index:2;
    }
    .title { 
        font-size:42px; font-weight:bold; color:#fff; 
        text-transform:uppercase; letter-spacing:4px; 
        text-shadow: 4px 4px 12px rgba(0,0,0,0.9);
        line-height:1.2;
    }
    .description { 
        font-size:22px; line-height:1.7; color:#fff; 
        text-shadow: 3px 3px 10px rgba(0,0,0,0.9);
        max-width:750px;
    }

    .image-col {
        flex:1; display:flex; align-items:center; justify-content:center;
        max-width:800px; z-index:2;
    }
    #langImage {
        width:100%; max-width:700px; height:auto; max-height:270px;
        border-radius:16px; 
        box-shadow: 0 12px 40px rgba(0,0,0,.6); 
        display:none;
        object-fit:cover;
    }

    .glitch { animation: glitch .8s ease-in-out; }
    @keyframes glitch {
        0% { transform: translate(0); opacity:1; filter:none; }
        10% { transform: translate(-2px, 1px); }
        20% { transform: translate(2px, -2px); }
        40% { transform: translate(1px, -1px); }
        50% { opacity: .35; filter: blur(2px); }
        60% { transform: translate(2px, 1px); opacity:.75; }
        80% { transform: translate(-1px, 1px); }
        100% { transform: translate(0); opacity:1; filter:none; }
    }
    .glass-glitch { animation: glassGlitch .8s ease-in-out; }
    @keyframes glassGlitch {
        0%,100% { background: rgba(0,0,0,0.35); }
        50%     { background: rgba(0,0,0,0.42); }
    }
</style>
</head>
<body>
    <div class="glass-overlay" id="glassOverlay">
        <div class="tint" id="tint"></div>
        <div class="sheen"></div>
        <div class="content-wrapper">
            <div class="text-col">
                <h1 class="title" id="title"></h1>
                <p class="description" id="description"></p>
            </div>
            <div class="image-col">
                <img id="langImage" alt="">
            </div>
        </div>
    </div>

    <script>
        const TINT_OPACITY = 0.15;
        const config = {
            timePerLanguage: 5000,
            timePerCard: 10000,
            glitchDuration: 800
        };

        let items = [];
        let cardIndex = 0;
        let lang = 'en';
        let langInterval = null;

        async function loadBannerItems() {
            try {
                const response = await fetch('https://api.github.com/repos/BadgeFans/carrusel-obs/contents/content/banner');
                if (!response.ok) throw new Error('GitHub fetch failed');
                const files = await response.json();
                const mdFiles = files.filter(f => f.name.endsWith('.md'));
                const loadedItems = [];
                for (const f of mdFiles) {
                    const txt = await (await fetch(f.download_url)).text();
                    const item = parseFrontmatter(txt);
                    if (item) loadedItems.push(item);
                }
                return loadedItems.sort((a,b)=>a.order-b.order);
            } catch(e) {
                console.error('Error loading items:', e);
                return getExampleData();
            }
        }

        function parseFrontmatter(content) {
            const m = content.match(/^---\n([\s\S]*?)\n---/);
            if (!m) return null;
            const data = {};
            m[1].split('\n').forEach(line=>{
                const idx = line.indexOf(':');
                if (idx === -1) return;
                const key = line.substring(0, idx).trim();
                const val = line.substring(idx + 1).trim();
                data[key] = val;
            });
            return {
                order: parseInt(data.order)||0,
                title: data.title||'',
                titleES: data.titleES||'',
                description: data.description||'',
                descriptionES: data.descriptionES||'',
                titleSize: data.titleSize||'42',
                descSize: data.descSize||'22',
                background: data.background||'',
                imageEN: data.imageEN || '',
                imageES: data.imageES || ''
            };
        }

        function getExampleData() {
            return [{
                order:1,
                title:'NEW STREAM SCHEDULE',
                titleES:'NUEVO HORARIO DE STREAM',
                description:'Streaming Monday to Friday from 8 PM to 11 PM EST. Join us for gaming, chat, and fun times!',
                descriptionES:'Transmitiendo de lunes a viernes de 8 PM a 11 PM EST. ¡Únete para juegos, chat y buenos momentos!',
                titleSize:'42', descSize:'22',
                background:'linear-gradient(135deg, #a855f7, #ec4899)',
                imageEN:'https://via.placeholder.com/700x270/a855f7/fff?text=English',
                imageES:'https://via.placeholder.com/700x270/ec4899/fff?text=Español'
            }];
        }

        function applyItem(item){
            const t = document.getElementById('title');
            const d = document.getElementById('description');
            const tint = document.getElementById('tint');
            const img = document.getElementById('langImage');

            t.style.fontSize = (item.titleSize||'42')+'px';
            d.style.fontSize = (item.descSize||'22')+'px';

            if (item.background) {
                tint.style.background = item.background;
                tint.style.opacity = TINT_OPACITY;
                tint.style.display = 'block';
            } else {
                tint.style.display = 'none';
            }

            if (item.imageEN || item.imageES) {
                img.style.display = 'block';
                img.src = (lang === 'en') ? (item.imageEN || item.imageES) : (item.imageES || item.imageEN);
            } else {
                img.style.display = 'none';
            }
        }

        function swapLanguage(item){
            const t = document.getElementById('title');
            const d = document.getElementById('description');
            const g = document.getElementById('glassOverlay');
            const img = document.getElementById('langImage');

            t.classList.add('glitch');
            d.classList.add('glitch');
            g.classList.add('glass-glitch');

            setTimeout(()=>{
                lang = (lang==='en')?'es':'en';
                t.textContent = (lang==='en') ? item.title : (item.titleES || item.title);
                d.textContent = (lang==='en') ? item.description : (item.descriptionES || item.description);

                const nextSrc = (lang==='en') ? (item.imageEN || item.imageES) : (item.imageES || item.imageEN);
                if (nextSrc) {
                    img.style.display='block';
                    img.src = nextSrc;
                } else {
                    img.style.display='none';
                }
            }, config.glitchDuration/2);

            setTimeout(()=>{
                t.classList.remove('glitch');
                d.classList.remove('glitch');
                g.classList.remove('glass-glitch');
            }, config.glitchDuration);
        }

        function showCard(index) {
            if (langInterval) clearInterval(langInterval);
            
            const item = items[index];
            lang = 'en';
            
            applyItem(item);
            document.getElementById('title').textContent = item.title;
            document.getElementById('description').textContent = item.description;
            
            langInterval = setInterval(() => swapLanguage(item), config.timePerLanguage);
        }

        function startRotation(){
            if (!items.length) return;
            
            showCard(cardIndex);
            
            setInterval(() => {
                cardIndex = (cardIndex + 1) % items.length;
                showCard(cardIndex);
            }, config.timePerCard);
        }

        window.addEventListener('DOMContentLoaded', async ()=>{
            items = await loadBannerItems();
            if (!items.length) items = getExampleData();
            startRotation();
        });
    </script>
</body>
</html>
