<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Banner Carrusel OBS - 996x350</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: transparent;
      width: 996px;
      height: 350px;
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      position: relative;
    }

    .gallery {
      position: relative;
      width: 996px;
      height: 350px;
      display: flex;
      align-items: center;
      justify-content: center;
      perspective: 1000px;
    }

    .cards {
      position: relative;
      width: 996px;
      height: 350px;
      list-style: none;
      transform-style: preserve-3d;
    }

    .cards li {
      position: absolute;
      width: 996px;
      height: 350px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      opacity: 0;
      transform: translateX(100px) scale(0.8) rotateY(-5deg);
    }

    /* Card protagonista (activa) */
    .cards li.active {
      opacity: 1;
      transform: translateX(0) scale(1) rotateY(0deg);
      z-index: 10;
      box-shadow: 0 0 40px rgba(168, 85, 247, 0.8),
                  0 0 80px rgba(168, 85, 247, 0.5),
                  0 20px 60px rgba(0, 0, 0, 0.6);
      border: 3px solid rgba(168, 85, 247, 0.6);
    }

    /* Card siguiente (bosquejo detrás a la derecha) */
    .cards li.next {
      opacity: 0.4;
      transform: translateX(50px) scale(0.85) rotateY(-8deg);
      z-index: 5;
      filter: brightness(0.6);
    }

    /* Card anterior (bosquejo detrás a la izquierda) */
    .cards li.prev {
      opacity: 0.3;
      transform: translateX(-50px) scale(0.85) rotateY(8deg);
      z-index: 4;
      filter: brightness(0.5);
    }

    /* Efecto glow morado en card activa */
    .cards li.active::before {
      content: '';
      position: absolute;
      top: -4px;
      left: -4px;
      right: -4px;
      bottom: -4px;
      background: linear-gradient(45deg, #a855f7, #ec4899, #8b5cf6, #a855f7);
      background-size: 400% 400%;
      border-radius: 18px;
      z-index: -1;
      opacity: 0.8;
      filter: blur(12px);
      animation: gradientShift 3s ease infinite;
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Partículas decorativas moradas */
    body::before,
    body::after {
      content: '';
      position: fixed;
      width: 300px;
      height: 300px;
      border-radius: 50%;
      pointer-events: none;
      z-index: -1;
    }

    body::before {
      background: radial-gradient(circle, rgba(168, 85, 247, 0.15) 0%, transparent 70%);
      top: -100px;
      left: -100px;
      animation: float 20s ease-in-out infinite;
    }

    body::after {
      background: radial-gradient(circle, rgba(236, 72, 153, 0.15) 0%, transparent 70%);
      bottom: -100px;
      right: -100px;
      animation: float 25s ease-in-out infinite reverse;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(30px, -30px) scale(1.1); }
      66% { transform: translate(-30px, 30px) scale(0.9); }
    }
  </style>
</head>
<body>
  <div class="gallery">
    <ul class="cards" id="cardsList"></ul>
  </div>

  <script>
    // Cargar items desde content/banner/
    async function loadBannerItems() {
      try {
        const response = await fetch('https://api.github.com/repos/TU-USUARIO/carrusel-obs/contents/content/banner');
        const files = await response.json();
        
        const mdFiles = files.filter(file => file.name.endsWith('.md'));
        const items = [];
        
        for (const file of mdFiles) {
          const contentResponse = await fetch(file.download_url);
          const content = await contentResponse.text();
          const item = parseFrontmatter(content);
          if (item) items.push(item);
        }
        
        return items.sort((a, b) => a.order - b.order);
      } catch (error) {
        console.log('Usando datos de ejemplo');
        return getExampleData();
      }
    }

    function parseFrontmatter(content) {
      const match = content.match(/^---\n([\s\S]*?)\n---/);
      if (!match) return null;
      
      const frontmatter = match[1];
      const lines = frontmatter.split('\n');
      const data = {};
      
      lines.forEach(line => {
        const [key, ...valueParts] = line.split(':');
        if (key && valueParts.length) {
          data[key.trim()] = valueParts.join(':').trim();
        }
      });
      
      return {
        order: parseInt(data.order) || 0,
        image: data.image || '',
        title: data.title || ''
      };
    }

    function getExampleData() {
      return [
        { image: 'https://assets.codepen.io/16327/portrait-number-01.png', order: 1, title: 'Card 1' },
        { image: 'https://assets.codepen.io/16327/portrait-number-02.png', order: 2, title: 'Card 2' },
        { image: 'https://assets.codepen.io/16327/portrait-number-03.png', order: 3, title: 'Card 3' },
        { image: 'https://assets.codepen.io/16327/portrait-number-04.png', order: 4, title: 'Card 4' },
        { image: 'https://assets.codepen.io/16327/portrait-number-05.png', order: 5, title: 'Card 5' },
        { image: 'https://assets.codepen.io/16327/portrait-number-06.png', order: 6, title: 'Card 6' },
        { image: 'https://assets.codepen.io/16327/portrait-number-07.png', order: 7, title: 'Card 7' },
      ];
    }

    let currentIndex = 0;
    let items = [];
    let cards = [];

    async function initCarousel() {
      items = await loadBannerItems();
      const cardsList = document.getElementById('cardsList');
      
      // Crear todas las cards
      items.forEach((item, index) => {
        const li = document.createElement('li');
        li.style.backgroundImage = `url(${item.image})`;
        li.dataset.index = index;
        cardsList.appendChild(li);
        cards.push(li);
      });
      
      // Iniciar carrusel
      updateCards();
      setInterval(nextCard, 4000); // Cambiar cada 4 segundos
    }

    function updateCards() {
      const total = cards.length;
      
      cards.forEach((card, index) => {
        card.classList.remove('active', 'next', 'prev');
        
        if (index === currentIndex) {
          card.classList.add('active');
        } else if (index === (currentIndex + 1) % total) {
          card.classList.add('next');
        } else if (index === (currentIndex - 1 + total) % total) {
          card.classList.add('prev');
        }
      });
    }

    function nextCard() {
      currentIndex = (currentIndex + 1) % cards.length;
      updateCards();
    }

    // Iniciar cuando cargue la página
    window.addEventListener('DOMContentLoaded', initCarousel);
  </script>
</body>
</html>
