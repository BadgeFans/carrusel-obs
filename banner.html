<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Banner Carrusel OBS</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: #000000;
      width: 996px;
      height: 350px;
      overflow: hidden;
      position: relative;
    }

    .gallery {
      position: relative;
      width: 996px;
      height: 350px;
      background: #000000;
    }

    .cards {
      position: relative;
      width: 996px;
      height: 350px;
      list-style: none;
    }

    .cards li {
      position: absolute;
      top: 0;
      left: 0;
      width: 996px;
      height: 350px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }

    .cards li.active {
      opacity: 1;
      z-index: 10;
      box-shadow: 0 0 40px rgba(168, 85, 247, 0.9),
                  0 0 80px rgba(168, 85, 247, 0.6),
                  0 20px 60px rgba(0, 0, 0, 0.9);
      border: 3px solid #a855f7;
    }

    .cards li.active::before {
      content: '';
      position: absolute;
      top: -4px;
      left: -4px;
      right: -4px;
      bottom: -4px;
      background: linear-gradient(45deg, #a855f7, #7c3aed, #6d28d9, #a855f7);
      background-size: 400% 400%;
      border-radius: 18px;
      z-index: -1;
      opacity: 0.9;
      filter: blur(15px);
      animation: gradientShift 4s ease infinite;
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    body::before,
    body::after {
      content: '';
      position: fixed;
      width: 400px;
      height: 400px;
      border-radius: 50%;
      pointer-events: none;
      z-index: -1;
    }

    body::before {
      background: radial-gradient(circle, rgba(168, 85, 247, 0.2) 0%, transparent 70%);
      top: -150px;
      left: -150px;
      animation: float 25s ease-in-out infinite;
    }

    body::after {
      background: radial-gradient(circle, rgba(124, 58, 237, 0.2) 0%, transparent 70%);
      bottom: -150px;
      right: -150px;
      animation: float 30s ease-in-out infinite reverse;
    }

    @keyframes float {
      0%, 100% { 
        transform: translate(0, 0) scale(1);
        opacity: 0.6;
      }
      33% { 
        transform: translate(40px, -40px) scale(1.15);
        opacity: 0.8;
      }
      66% { 
        transform: translate(-40px, 40px) scale(0.95);
        opacity: 0.7;
      }
    }
  </style>
</head>
<body>
  <div class="gallery">
    <ul class="cards" id="cardsList"></ul>
  </div>

  <script>
    async function loadBannerItems() {
      try {
        const response = await fetch('https://api.github.com/repos/TU-USUARIO/carrusel-obs/contents/content/banner');
        const files = await response.json();
        
        const mdFiles = files.filter(file => file.name.endsWith('.md'));
        const items = [];
        
        for (const file of mdFiles) {
          const contentResponse = await fetch(file.download_url);
          const content = await contentResponse.text();
          const item = parseFrontmatter(content);
          if (item) items.push(item);
        }
        
        return items.sort((a, b) => a.order - b.order);
      } catch (error) {
        return getExampleData();
      }
    }

    function parseFrontmatter(content) {
      const match = content.match(/^---\n([\s\S]*?)\n---/);
      if (!match) return null;
      
      const frontmatter = match[1];
      const lines = frontmatter.split('\n');
      const data = {};
      
      lines.forEach(line => {
        const [key, ...valueParts] = line.split(':');
        if (key && valueParts.length) {
          data[key.trim()] = valueParts.join(':').trim();
        }
      });
      
      return {
        order: parseInt(data.order) || 0,
        image: data.image || ''
      };
    }

    function getExampleData() {
      return [
        { image: 'https://picsum.photos/seed/purple/996/350', order: 1 },
        { image: 'https://picsum.photos/seed/neon/996/350', order: 2 },
        { image: 'https://picsum.photos/seed/cyber/996/350', order: 3 },
        { image: 'https://picsum.photos/seed/glow/996/350', order: 4 },
        { image: 'https://picsum.photos/seed/tech/996/350', order: 5 },
      ];
    }

    let currentIndex = 0;
    let items = [];
    let cards = [];

    async function initCarousel() {
      items = await loadBannerItems();
      const cardsList = document.getElementById('cardsList');
      
      items.forEach((item) => {
        const li = document.createElement('li');
        li.style.backgroundImage = `url(${item.image})`;
        cardsList.appendChild(li);
        cards.push(li);
      });
      
      updateCards();
      setInterval(nextCard, 8000);
    }

    function updateCards() {
      cards.forEach((card, index) => {
        card.classList.remove('active');
        if (index === currentIndex) {
          card.classList.add('active');
        }
      });
    }

    function nextCard() {
      currentIndex = (currentIndex + 1) % cards.length;
      updateCards();
    }

    window.addEventListener('DOMContentLoaded', initCarousel);
  </script>
</body>
</html>
