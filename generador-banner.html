document.getElementById('itemForm').addEventListener('submit', (e) => {
    e.preventDefault();
    const order = document.getElementById('order').value;
    const title = document.getElementById('title').value.trim();
    const titleES = document.getElementById('titleES').value.trim();
    const description = document.getElementById('description').value.trim();
    const descriptionES = document.getElementById('descriptionES').value.trim();
    const background = document.getElementById('background').value;
    const imagesText = document.getElementById('images').value.trim();

    // NUEVO
    const imageEN = document.getElementById('imageEN').value.trim();
    const imageES = document.getElementById('imageES').value.trim();

    if (!title || !titleES || !description || !descriptionES) {
        alert('⚠️ Completa títulos y descripciones en ambos idiomas.');
        return;
    }

    let code = `---
order: ${order}
title: ${title}
titleES: ${titleES}
description: ${description}
descriptionES: ${descriptionES}
titleSize: ${titleSize.value}
descSize: ${descSize.value}`;

    if (background) code += `\nbackground: ${background}`;
    if (imagesText) {
        const list = imagesText.split('\n').map(s => s.trim()).filter(Boolean).join(', ');
        code += `\nimages: ${list}`;
    }

    // NUEVO: solo agrega si se completan
    if (imageEN) code += `\nimageEN: ${imageEN}`;
    if (imageES) code += `\nimageES: ${imageES}`;

    code += `\n---`;

    document.getElementById('codeBox').textContent = code;
    document.getElementById('output').classList.add('show');

    const fileName = title.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-') + '.md';
    document.getElementById('fileName').textContent = fileName;
    document.getElementById('output').scrollIntoView({ behavior: 'smooth' });
});
